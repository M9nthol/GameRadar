# Система окончания игры для Mel

## Описание
Реализована система окончания игры с двумя исходами:
1. **Победа** - все ракеты сбиты и ни одна не долетела до цели (0,0,0)
2. **Поражение** - хотя бы одна ракета долетела до цели и взорвалась

## Новые файлы

### MelGameMode.h/cpp
- Управляет состоянием игры
- Отслеживает количество уничтоженных ракет
- Проверяет условия победы/поражения
- Уведомляет HUD о необходимости показать сообщение

### GameHUD.h/cpp
- Управляет отображением UI элементов
- Создает и показывает виджет с сообщением о конце игры

### SimpleGameEndWidget.h/cpp
- Простой UI виджет для отображения сообщений "Победа!" или "Поражение!"

## Обновленные файлы

### MissleActor.h/cpp
- Добавлены делегаты `OnMissleDestroyed` и `OnMissleReachedTarget`
- Добавлена переменная `bHasReachedTarget` для отслеживания состояния
- Добавлен метод `IsNearTarget()` для проверки близости к цели
- Обновлен метод `Explode()` для вызова делегата при уничтожении

### MissleSpawner.h/cpp
- Добавлены методы для обработки событий ракет
- Подписка на события созданных ракет
- Уведомление MelGameMode о событиях

## Настройка в Unreal Editor

### 1. Создание Blueprint виджета
1. В Content Browser создайте новый Widget Blueprint
2. Назовите его `WBP_GameEndWidget`
3. Добавьте Text Block с именем `MessageText`
4. Настройте стиль текста (размер, цвет, шрифт)
5. Скомпилируйте Blueprint

### 2. Настройка GameMode
1. Создайте Blueprint класс на основе `MelGameMode`
2. В настройках уровня установите этот GameMode как Default GameMode
3. В настройках GameMode установите HUD Class как `GameHUD`

### 3. Настройка HUD
1. Создайте Blueprint класс на основе `GameHUD`
2. В настройках GameMode установите GameEndWidgetClass как `WBP_GameEndWidget`

### 4. Настройка уровня
1. Убедитесь, что на уровне есть экземпляр `MissleSpawner`
2. Установите желаемое количество ракет в `MissleCount`
3. Убедитесь, что есть экземпляры `RadarActor` и `AAActor` для работы ПВО

## Логика работы

1. При запуске игры `MissleSpawner` создает заданное количество ракет
2. Каждая ракета подписывается на события `MissleSpawner`
3. При уничтожении ракеты вызывается `OnMissleDestroyed`
4. При достижении ракетой цели (0,0,0) вызывается `OnMissleReachedTarget`
5. `MissleSpawner` уведомляет `MelGameMode` о событиях
6. `MelGameMode` проверяет условия окончания игры:
   - Если все ракеты уничтожены и ни одна не достигла цели → Победа
   - Если хотя бы одна ракета достигла цели → Поражение
7. При окончании игры `MelGameMode` уведомляет `GameHUD`
8. `GameHUD` показывает соответствующее сообщение через `SimpleGameEndWidget`

## Дополнительные возможности

Для расширения функциональности можно:
- Добавить кнопки "Перезапустить" и "Выйти" в виджет
- Добавить звуковые эффекты при победе/поражении
- Добавить анимации появления сообщения
- Добавить счетчик оставшихся ракет
- Добавить таймер игры 